[% page.js.push("ntppool.js"); USE Number.Format; %]

<div class="block">

    [% IF 0 AND combust.current_account.vendor_zones_count > 0 %]
    <b>plan?</b> <!-- show "plan" for account  -->
    [% END %]

    [% FOR vz = combust.current_account.vendor_zones %]
    <h3>[% vz.zone_name | html %]</h3>
    <p>
        ID: [% vz.id %] / [% vz.id_token %]<br>
        Organization: [% vz.organization_name | html %]<br />
        Status: <i>[% vz.status %]</i><br />
        <a href="[% combust.manage_url('/manage/vendor/zone', id=vz.id_token) %]">
            [% IF vz.status == 'New' %]
                Finish setup
            [% ELSE %]
                View details
            [% END %]
        </a>
    </p>

    [% END # vendor_zone %]

    <p>
        <a href="[% combust.manage_url('/manage/vendor/new') %]">Setup a new vendor zone</a>
    </p>

[% IF subscriptions %]

  <div class="row">
    <h3>Current plan</h3>
    <p></p>
  </div>

  <div class="row">

    [% FOR plan IN subscriptions %]

      <div class="col">

      <b>
        [% plan.name %]
      </b>

      <ul class="product-details">
        <li>Up to [% plan.max_zones %] DNS zones</li>
        <li>Up to [% plan.max_devices | format_number %] client devices</li>
      </ul>
    </div>
    [% END %]
  </div>

    <form method="post" class="form-inline btn-inline" action="/manage/vendor/billing">
        <input type="hidden" name="auth_token" value="[% combust.auth_token %]" />
        <input type="hidden" name="a" value="[% combust.current_account.id_token %]">
        <input type="submit" class="btn btn-primary" value="Update billing information &rarr;" />
    </form>

[% END %]

    [% PROCESS tpl/vendor/help.html %]

    <!--
            todo: if zone is setup, but no "plan" exists, link to
            "setup a plan" workflow.

            status:
                new      = not submitted, show [ pay | open source ] form
                pending  = waiting for admin to approve open source plan
                approved = active
                rejected = new + message? Just send it back to new and add to the log?

    -->

</div>
